<template>
<div class="page">
	<div class="navbar">
		<div class="navbar-inner sliding">
			<div class="left mq-left">
				<svg width="80" height="30" viewbox="-2 -4 120 40">
					<rect height="30" width="104" y="0" x="0" stroke-width="2" stroke="#000" fill="#fff"/>
					<rect height="14" width="8" y="8" x="104" stroke-width="0" stroke="#000" fill="#000000"/>
					<rect class="mq-battery-fill" height="26" width="50" y="2" x="2" stroke-width="0" stroke="#000" fill="#00bf5f"/>
					<text class="mq-battery-text" font-weight="500" font-size="20" y="22" x="34" stroke-width="0" stroke="#000" fill="#000000"> 50%</text>
				</svg>
			</div>
			<div class="title">MiniQuad - Moves</div>
			<div class="right">
				<a href="/moves-edit/" class="link">Edit</a>
			</div>
		</div>
	</div>
	<div class="page-content">
		<div class="block-title">Moves</div>
		<!-- Moves buttons -->
		<div class="row">
			<table style="width: 100%; background: #fff">
				<tr>
					<td style="width: 32vw"><a href="#" class="mq-moves-button" id="user1" @click="onClickMove">User1</a></td>
					<td style="width: 32vw"><a href="#" class="mq-moves-button" id="user2" @click="onClickMove">User2</a></td>
					<td style="width: 32vw"><a href="#" class="mq-moves-button" id="user3" @click="onClickMove">User3</a></td>
				</tr>
				<tr>
					<td><a href="#" class="mq-moves-button" id="user4" @click="onClickMove">User4</a></td>
					<td><a href="#" class="mq-moves-button mq-active" id="stop-" @click="onClickMove"><i class="icon f7-icons mq-icon">pause_fill</i></a></td>
					<td><a href="#" class="mq-moves-button mq-hidden" id="user6" @click="onClickMove">User6</a></td>
				</tr>
				<tr>
					<td><a href="#" class="mq-moves-button mq-hidden" id="user7" @click="onClickMove">User7</a></td>
					<td><a href="#" class="mq-moves-button mq-hidden" id="user8" @click="onClickMove">User8</a></td>
					<td><a href="#" class="mq-moves-button mq-hidden" id="user9" @click="onClickMove">User9</a></td>
				</tr-->
			</table>
		</div>
		<!-- speed bar -->
		<div class="block-title">Move speed</div>
		<div class="list simple-list">
			<ul>
				<li>
					<div class="item-cell width-auto flex-shrink-0">
						<i class="icon f7-icons ios-only">delete_round</i>
						<i class="icon material-icons md-only">remove</i>
					</div>
					<div class="item-cell flex-shrink-3">
						<div class="range-slider range-slider-init" data-label="true" @range:change="onChangeMoveSpeed" id="mq-moves-speed"
							data-min="0" data-max="100" data-step="1" data-value="50"></div>
					</div>
					<div class="item-cell width-auto flex-shrink-0">
						<i class="icon f7-icons ios-only">add_round</i>
						<i class="icon material-icons md-only">add</i>
					</div>
				</li>
			</ul>
		</div>
		
	</div>
	<div class="toolbar tabbar toolbar-bottom-md">
		<div class="toolbar-inner sliding">
			<a href="/home/" class="tab-link">
				<i class="icon f7-icons">paper_plane</i>
			</a>
			<a href="#moves" class="tab-link tab-link-active">
				<i class="icon f7-icons">data</i>
			</a>
			<a href="/settings/" class="tab-link">
				<i class="icon f7-icons">filter</i>
			</a>
		</div>
	</div>
</div>
</template>
<script>
return {
	data: function () {
		return {
			"move":['Dance', 'Bow', 'Lie', 'Jump']
		}
	},
	
	on: {
		pageInit: function () {
			sendWSCommand("action:moveSpeed:get");
			sendWSCommand("battery:get");
		},
        pageAfterOut: function() {
			sendWSCommand("action:move:stop");
		},
	},
	
	methods: {
		onClickMove: function(e) {
			var $ = this.$;
			var buttonId = $(e.target).parent().attr('id');
			if (buttonId == null) buttonId = $(e.target).attr('id');
			sendWSCommand("action:move:" + buttonId);
			$('.mq-moves-button').removeClass('mq-active');
			$("#" + buttonId).addClass('mq-active');
		},

		onChangeMoveSpeed: function (e, range) {
			var $ = this.$;
			var app = this.$app;
			var moveSpeed = app.range.getValue('#mq-moves-speed');
			sendWSCommand("action:moveSpeed:set:" + moveSpeed);
		},
	}
}
</script>